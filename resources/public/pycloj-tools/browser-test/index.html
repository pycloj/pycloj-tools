<!DOCTYPE html>
<html><body style="background-color:#dddddd;"><head><script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/lang-clj.js" type="text/javascript"></script></head><div><h1>pycloj-tools.browser-test</h1><i><small><a href="https://github.com/pycloj/pycloj-tools/tree/master/test/pycloj_tools/browser_test.clj">pycloj-tools.browser-test</a> - created by <a href="https://github.com/scicloj/notespace">notespace</a>, Wed Dec 25 01:00:53 IST 2019.</small></i><hr /><div>Table of contents<ul><li><a href="#name-module-test">name-module-test</a></li><li><a href="#failed-import-test">failed-import-test</a></li><li><a href="#submodule-names-test">submodule-names-test</a></li><li><a href="#no-submodules-test">no-submodules-test</a></li><li><a href="#submodules-of-failed-import-test">submodules-of-failed-import-test</a></li><li><a href="#submodules-test">submodules-test</a></li><li><a href="#recursive-submodules-test">recursive-submodules-test</a></li><li><a href="#functions-map-test">functions-map-test</a></li><li><a href="#classes-map-test">classes-map-test</a></li><li><a href="#function-info-test">function-info-test</a></li></ul></div><hr /><p><p><div style="background-color:#f2f2f2; width: 100%"><div><code class="prettyprint lang-clj">(require</br>&nbsp;&nbsp;(quote&nbsp;[pycloj-tools.browser&nbsp;:refer</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:all])</br>&nbsp;&nbsp;(quote&nbsp;[pycloj-tools.pyutils&nbsp;:as</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pyutils])</br>&nbsp;&nbsp;(quote&nbsp;[libpython-clj.python&nbsp;:as&nbsp;py])</br>&nbsp;&nbsp;(quote&nbsp;[clojure.java.shell&nbsp;:refer</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[sh]])</br>&nbsp;&nbsp;(quote&nbsp;[clojure.string&nbsp;:as&nbsp;string])</br>&nbsp;&nbsp;(quote&nbsp;[com.rpl.specter&nbsp;:refer</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[transform&nbsp;ALL&nbsp;MAP-VALS]]))</br></br></code></div></div></p></p><p><div><p>The <code>pycloj-tools.browser</code> namespace offers a collection of functions for inspecting python modules. We will test it with realistic python packages such as <code>pandas</code>, as well as with a dummy one, that we have here:</p></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><div><code class="prettyprint lang-clj">[:div</br>&nbsp;(->&nbsp;(sh&nbsp;"find"&nbsp;"dummy_package")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:out</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(string/split&nbsp;(re-pattern&nbsp;"\n"))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(->></br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(filter&nbsp;(fn&nbsp;[line]</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(not&nbsp;(re-find</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(re-pattern</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"__pycache__")</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;line))))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(map&nbsp;(fn&nbsp;[line]&nbsp;[:li&nbsp;line]))</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(into&nbsp;[:ul])))]</br></br></code></div></div></p><div><ul><li>dummy_package</li><li>dummy_package/module_a</li><li>dummy_package/module_a/submodule_aa</li><li>dummy_package/module_a/submodule_aa/submodule_aaa</li><li>dummy_package/module_a/submodule_aa/submodule_aaa/__init__.py</li><li>dummy_package/module_a/submodule_aa/__init__.py</li><li>dummy_package/module_a/submodule_aa/submodule_aab</li><li>dummy_package/module_a/__init__.py</li><li>dummy_package/__init__.py</li></ul></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><a id="name-module-test">~~~~name-module-test~~~~</a><div><code class="prettyprint lang-clj">[[=</br>&nbsp;&nbsp;(->&nbsp;"dummy_package.module_a"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;module->name)</br>&nbsp;&nbsp;"dummy_package.module_a"]]</br></br></code></div></div></p><div><p style="color:green">PASSED</p></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><a id="failed-import-test">~~~~failed-import-test~~~~</a><div><code class="prettyprint lang-clj">[[=</br>&nbsp;&nbsp;(->&nbsp;"dummy_package.modulllle_a"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module)</br>&nbsp;&nbsp;{:cause</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"ModuleNotFoundError:&nbsp;No&nbsp;module&nbsp;named&nbsp;'dummy_package.modulllle_a'\n",</br>&nbsp;&nbsp;&nbsp;:failed-import?&nbsp;true,</br>&nbsp;&nbsp;&nbsp;:module-name</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"dummy_package.modulllle_a"}]]</br></br></code></div></div></p><div><p style="color:green">PASSED</p></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><a id="submodule-names-test">~~~~submodule-names-test~~~~</a><div><code class="prettyprint lang-clj">[[=</br>&nbsp;&nbsp;(->&nbsp;"dummy_package.module_a"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;module->submodules-names)</br>&nbsp;&nbsp;["dummy_package.module_a.submodule_aa"]]</br>&nbsp;[=</br>&nbsp;&nbsp;(->&nbsp;"pandas"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;module->submodules-names)</br>&nbsp;&nbsp;["pandas._config"&nbsp;"pandas._libs"</br>&nbsp;&nbsp;&nbsp;"pandas.api"&nbsp;"pandas.arrays"</br>&nbsp;&nbsp;&nbsp;"pandas.compat"&nbsp;"pandas.core"</br>&nbsp;&nbsp;&nbsp;"pandas.errors"&nbsp;"pandas.io"</br>&nbsp;&nbsp;&nbsp;"pandas.plotting"&nbsp;"pandas.tests"</br>&nbsp;&nbsp;&nbsp;"pandas.tseries"&nbsp;"pandas.util"]]]</br></br></code></div></div></p><div><p style="color:green">PASSED</p><p style="color:green">PASSED</p></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><a id="no-submodules-test">~~~~no-submodules-test~~~~</a><div><code class="prettyprint lang-clj">[[=</br>&nbsp;&nbsp;(-></br>&nbsp;&nbsp;&nbsp;&nbsp;"dummy_package.module_a.submodule_aa.submodule_aaa"</br>&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;module->submodules-names)&nbsp;[]]</br>&nbsp;[=</br>&nbsp;&nbsp;(->&nbsp;"pandas.plotting._matplotlib"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;module->submodules-names)&nbsp;[]]]</br></br></code></div></div></p><div><p style="color:green">PASSED</p><p style="color:green">PASSED</p></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><a id="submodules-of-failed-import-test">~~~~submodules-of-failed-import-test~~~~</a><div><code class="prettyprint lang-clj">[[nil?</br>&nbsp;&nbsp;(->&nbsp;"dummy_package.modulllle_a"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;module->submodules-names)]]</br></br></code></div></div></p><div><p style="color:green">PASSED</p></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><a id="submodules-test">~~~~submodules-test~~~~</a><div><code class="prettyprint lang-clj">[[=</br>&nbsp;&nbsp;(->>&nbsp;"dummy_package.module_a"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;module->submodules</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(map&nbsp;module->name))</br>&nbsp;&nbsp;["dummy_package.module_a.submodule_aa"]]]</br></br></code></div></div></p><div><p style="color:green">PASSED</p></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><a id="recursive-submodules-test">~~~~recursive-submodules-test~~~~</a><div><code class="prettyprint lang-clj">[[=</br>&nbsp;&nbsp;(->>&nbsp;"dummy_package.module_a"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;module->recursive-submodules</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(map&nbsp;module->name))</br>&nbsp;&nbsp;["dummy_package.module_a"</br>&nbsp;&nbsp;&nbsp;"dummy_package.module_a.submodule_aa"</br>&nbsp;&nbsp;&nbsp;"dummy_package.module_a.submodule_aa.submodule_aaa"]]]</br></br></code></div></div></p><div><p style="color:green">PASSED</p></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><a id="functions-map-test">~~~~functions-map-test~~~~</a><div><code class="prettyprint lang-clj">[[=</br>&nbsp;&nbsp;(->></br>&nbsp;&nbsp;&nbsp;&nbsp;"dummy_package.module_a.submodule_aa"</br>&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;->functions-map</br>&nbsp;&nbsp;&nbsp;&nbsp;keys</br>&nbsp;&nbsp;&nbsp;&nbsp;set)&nbsp;#{:f}]</br>&nbsp;[=</br>&nbsp;&nbsp;(->>&nbsp;"dummy_package"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->functions-map</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keys</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set)</br>&nbsp;&nbsp;#{:calling_custom_clojure_fn</br>&nbsp;&nbsp;&nbsp;&nbsp;:complex_fn&nbsp;:for_iter}]</br>&nbsp;[=</br>&nbsp;&nbsp;(->>&nbsp;"dummy_package"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->classes-map</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:WithObjClass</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->functions-map</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keys</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set)</br>&nbsp;&nbsp;#{:__enter__&nbsp;:__exit__&nbsp;:__init__</br>&nbsp;&nbsp;&nbsp;&nbsp;:doit_err&nbsp;:doit_noerr}]]</br></br></code></div></div></p><div><p style="color:green">PASSED</p><p style="color:green">PASSED</p><p style="color:green">PASSED</p></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><a id="classes-map-test">~~~~classes-map-test~~~~</a><div><code class="prettyprint lang-clj">[[=</br>&nbsp;&nbsp;(->>&nbsp;"dummy_package"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->classes-map</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;keys</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set)&nbsp;#{:WithObjClass}]]</br></br></code></div></div></p><div><p style="color:green">PASSED</p></div></p><p><p><div style="background-color:#f2f2f2; width: 100%"><a id="function-info-test">~~~~function-info-test~~~~</a><div><code class="prettyprint lang-clj">[[=</br>&nbsp;&nbsp;(->>&nbsp;"dummy_package"</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name->module</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->functions-map</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:complex_fn</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;function->info)</br>&nbsp;&nbsp;{:args&nbsp;[{:annotation&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:empty&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:kind&nbsp;:POSITIONAL_OR_KEYWORD,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;"a"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:annotation&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:empty&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:kind&nbsp;:POSITIONAL_OR_KEYWORD,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;"b"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:annotation&nbsp;:str,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default&nbsp;5,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:empty&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:kind&nbsp;:POSITIONAL_OR_KEYWORD,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;"c"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:annotation&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:empty&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:kind&nbsp;:VAR_POSITIONAL,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;"args"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:annotation&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default&nbsp;10,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:empty&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:kind&nbsp;:KEYWORD_ONLY,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;"d"}</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{:annotation&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:default&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:empty&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:kind&nbsp;:VAR_KEYWORD,</br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:name&nbsp;"kwargs"}],</br>&nbsp;&nbsp;&nbsp;:async?&nbsp;false,</br>&nbsp;&nbsp;&nbsp;:awaitable?&nbsp;false,</br>&nbsp;&nbsp;&nbsp;:builtin?&nbsp;false,</br>&nbsp;&nbsp;&nbsp;:doc&nbsp;nil,</br>&nbsp;&nbsp;&nbsp;:generator?&nbsp;false,</br>&nbsp;&nbsp;&nbsp;:name&nbsp;"complex_fn",</br>&nbsp;&nbsp;&nbsp;:return-annotation&nbsp;nil}]]</br></br></code></div></div></p><div><p style="color:green">PASSED</p></div></p><hr /><i><small><a href="https://github.com/pycloj/pycloj-tools/tree/master/test/pycloj_tools/browser_test.clj">pycloj-tools.browser-test</a> - created by <a href="https://github.com/scicloj/notespace">notespace</a>, Wed Dec 25 01:00:53 IST 2019.</small></i></div></body></html>